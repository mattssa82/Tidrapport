<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <title>Hjälp – Tidrapport v10.21</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icons/icon-192.png" />
  <meta name="theme-color" content="#006d6f" />
  <style>
    body { margin:0; font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif; background:#f5f5f5; }
    .app-bar {
      position:sticky; top:0; z-index:1000;
      display:flex; align-items:center; gap:10px;
      padding:0 12px; height:56px;
      background:#006d6f; color:#fff;
      box-shadow:0 2px 4px rgba(0,0,0,.25);
    }
    .icon-button{border:none;background:none;color:inherit;cursor:pointer;font-size:22px;padding:4px;}
    .title-main{font-size:18px;font-weight:600;}
    .sub{font-size:11px;opacity:.9;}
    main{max-width:900px;margin:0 auto 32px;padding:16px;}
    h1{font-size:24px;margin-bottom:4px;}
    h2{font-size:18px;margin-top:18px;}
    ul{padding-left:18px;}
    li{margin-bottom:4px;}
    code{background:#eee;padding:1px 4px;border-radius:4px;font-size:90%;}
    .box{background:#fff;border-radius:10px;padding:16px;box-shadow:0 1px 3px rgba(0,0,0,.16);}
  </style>
</head>
<body>
<header class="app-bar">
  <button class="icon-button" id="backBtn">←</button>
  <div>
    <div class="title-main">Hjälp – Tidrapport</div>
    <div class="sub">v10.21 – i samarbete med ChatGPT &amp; Martin Mattsson</div>
  </div>
</header>

<main>
  <div class="box">
    <h1>Så funkar inmatningen</h1>
    <p>All data sparas lokalt i din webbläsare.</p>

    <h2>1. Fält</h2>
    <ul>
      <li><b>Datum</b> – välj dag.</li>
      <li><b>Projekt nr</b> – t.ex. <code>Y2506</code>, Firman, Trello.</li>
      <li><b>Körtid (h)</b> – res/körtid för hela inmatningen. Visas en gång.</li>
      <li><b>Kategori &amp; tid</b> – lägg till en eller flera rader:
        <ul>
          <li>Ex: <code>Ordinarie tid</code> <code>8</code></li>
          <li>Ex: <code>Ordinarie tid</code> <code>6</code> + <code>Flextid</code> <code>2</code></li>
          <li>Ex: <code>Flextid</code> <code>-2</code> (tar från flexbank → räknas som 2h godkänd dag).</li>
        </ul>
      </li>
      <li><b>Dagboksanteckning</b> – text om vad du gjort. Sparas på första raden i inmatningen.</li>
    </ul>

    <p>När du sparar skapas en bunt rader med samma ID. Första raden bär körtid och anteckning. Alla rader har samma datum/projekt.</p>

    <h2>2. Regler i inmatningen</h2>
    <ul>
      <li>Du kan <b>inte</b> blanda <b>Ordinarie tid</b> med <b>VAB/Sjuk/FL</b> i samma inmatning.</li>
      <li>Du kan <b>inte</b> blanda <b>Ordinarie tid</b> med <b>minusvärden</b> (negativa timmar på Flextid/ATF/ÖT/ÖT Helg/Semester-tim) i samma inmatning.</li>
      <li>Samma kategori får inte användas två gånger i samma inmatning.</li>
      <li>Minusvärden (t.ex. Flextid -2) betyder att du tar från bank → timmarna räknas som motsvarande Ordinarie i balansen.</li>
    </ul>

    <h2>3. Balans &amp; färger (enkelt)</h2>
    <ul>
      <li><b>Grön</b> – minst 8h effektiv arbetstid eller motsvarande (Ordinarie + godkända kombinationer, inkl. hela -8-dagar från bank).</li>
      <li><b>Gul</b> – under 8h, eller endast frånvaro (VAB/Sjuk/FL).</li>
      <li><b>Röd</b> – vardag utan någon registrering.</li>
      <li><b>Helg/Röddag</b> – markeras separat, ger inget larm.</li>
    </ul>

    <h2>4. Larm / Obalans</h2>
    <p>Kortet “Larm / Obalans denna månad” visar bara <b>avvikelser</b> för passerade vardagar:</p>
    <ul>
      <li>“Ingen registrering (vardag)” – ingen rad alls.</li>
      <li>“Under 8h registrerad tid.” – summerad effektiv tid &lt; 8h.</li>
    </ul>

    <h2>5. Backup &amp; export</h2>
    <ul>
      <li><b>Backup nu (JSON)</b> – sparar allt till en fil. Används även för import.</li>
      <li><b>Exportera CSV (månad)</b> – alla rader + summering, klar för lön/rapport.</li>
      <li><b>Exportera PDF (månad)</b> – A3 liggande med alla rader.</li>
      <li><b>Exportera årsöversikt (CSV)</b> – summering per månad och kategori.</li>
      <li><b>Sök &amp; filtrera</b> – sök på år/projekt/text, exportera träffarna.</li>
    </ul>

    <h2>6. Auto-backup</h2>
    <p>Växla “Auto-backup (vid ändring)” i menyn om du vill att en backupfil skapas automatiskt när du lägger till eller tar bort poster.</p>
  </div>
</main>

<script>
  document.getElementById("backBtn").addEventListener("click", function(){
    window.location.href = "index.html";
  });
</script>
</body>
</html>