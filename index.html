<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>Tidrapport v10.8 – i samarbete med ChatGPT & Martin Mattsson</title>

<link rel="manifest" href="manifest.json" />
<script src="lucide.min.js"></script>
<style>
:root {
  --accent:#0e6677;
  --bg:#f5f7f8;
}
body {
  margin:0;
  font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
  background:var(--bg);
  color:#222;
}
header {
  position:fixed;
  top:0; left:0; right:0;
  background:var(--accent);
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:.7rem 1rem;
  z-index:1000;
  box-shadow:0 2px 6px rgba(0,0,0,.15);
}
header h1 {
  font-size:1.1rem;
  margin:0;
  display:flex;
  align-items:center;
  gap:.4rem;
}
header nav {
  display:flex;
  align-items:center;
  gap:.8rem;
}
header nav i {cursor:pointer;}
main {
  margin-top:4rem;
  padding:1rem;
}
form {
  background:#fff;
  padding:1rem;
  border-radius:.6rem;
  box-shadow:0 2px 5px rgba(0,0,0,.05);
  display:flex;
  flex-direction:column;
  gap:.7rem;
  max-width:900px;
  margin:auto;
}
label {
  display:flex;
  flex-direction:column;
  font-size:.9rem;
  color:#333;
}
input,select,textarea {
  font-size:.9rem;
  padding:.45rem .6rem;
  border:1px solid #bbb;
  border-radius:.4rem;
  width:100%;
  box-sizing:border-box;
}
.row2 {
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:.8rem;
}
.row3 {
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:.8rem;
  align-items:center;
}
button {
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:.4rem;
  border:0;
  border-radius:.4rem;
  font-size:.9rem;
  padding:.55rem .9rem;
  cursor:pointer;
}
button.primary {background:var(--accent);color:#fff;}
button.secondary {background:#e7e7e7;}
.actions {display:flex;gap:.6rem;justify-content:center;margin-top:.4rem;}

.table-wrap {overflow-x:auto;margin-top:1rem;}
table {
  width:100%;
  border-collapse:collapse;
  background:#fff;
  font-size:.85rem;
}
th,td {
  border:1px solid #ccc;
  padding:.4rem .6rem;
  text-align:left;
  vertical-align:top;
}
th {background:#ececec;font-weight:600;}
tfoot td {background:#fafafa;font-weight:600;}

aside {
  position:fixed;
  top:0; left:0;
  bottom:0;
  width:260px;
  background:var(--accent);
  color:#fff;
  transform:translateX(-100%);
  transition:.3s;
  overflow-y:auto;
  z-index:1200;
  padding:1rem;
}
aside.open {transform:translateX(0);}
aside h2 {font-size:1rem;margin-top:1rem;}
aside button,aside input,aside select {
  width:100%;
  margin-top:.4rem;
  font-size:.85rem;
}
aside .danger {
  background:#d9534f;
  color:#fff;
  font-weight:600;
}
footer {
  text-align:center;
  font-size:.8rem;
  margin-top:2rem;
  color:#555;
}
</style>
</head>
<body>

<header>
  <div style="display:flex;align-items:center;gap:.6rem;">
    <i id="menuBtn" data-lucide="menu"></i>
    <h1>Tidrapport</h1>
  </div>
  <nav>
    <i data-lucide="help-circle" id="helpBtn" title="Hjälp"></i>
    <i data-lucide="search" id="searchBtn" title="Sök & filtrera"></i>
  </nav>
</header>

<aside id="sideMenu">
  <h2>Period</h2>
  <label>År:<select id="yearSelect"></select></label>
  <label>Månad:<select id="monthSelect"></select></label>

  <h2>Backup / Export</h2>
  <input type="file" id="importFile" />
  <button id="backupBtn">Backup nu</button>
  <button id="exportCsvBtn">Exportera CSV</button>
  <button id="exportPdfBtn">Exportera PDF</button>
  <button id="exportYearBtn">Årsöversikt</button>
  <button class="danger" id="clearAllBtn">RENSA ALLT</button>

  <h2>Inställningar</h2>
  <label>Företag:<input id="cfgCompany" /></label>
  <label>Namn:<input id="cfgName" /></label>
  <label>Anst.nr:<input id="cfgEmpnr" /></label>
  <label>Timmar per röddag:<input id="cfgReddayHours" type="number" min="0" max="12" value="8" /></label>
  <label><input type="checkbox" id="cfgShowReddays" /> Visa röda dagar</label>
  <label><input type="checkbox" id="cfgAutoBackup" /> Auto-backup (COV)</label>
  <button id="saveCfgBtn">Spara</button>
  <footer>v10.8 – i samarbete med ChatGPT & Martin Mattsson</footer>
</aside>

<main>
  <form id="entryForm">
    <label>Datum<input type="date" id="datum" required /></label>
    <div class="row2">
      <label>Projekt nr<input id="projekt" placeholder="t.ex. Y2506" /></label>
      <label>Körtid (h)<input id="kortid" type="number" step="0.1" /></label>
    </div>
    <div class="row3">
      <label>Kategori & tid (h)
        <select id="kategori1">
          <option value="">(välj)</option>
          <option>Ordinarie tid</option>
          <option>Flex tid</option>
          <option>ÖT &lt; 2</option>
          <option>ÖT &gt; 2</option>
          <option>Helg</option>
          <option>Semester</option>
          <option>ATF</option>
          <option>VAB</option>
          <option>Sjuk</option>
          <option>Trakt</option>
        </select>
      </label>
      <input id="tid1" type="number" step="0.1" placeholder="timmar" />
    </div>
    <label>Dagboksanteckning<textarea id="anteckning" rows="2"></textarea></label>
    <div class="actions">
      <button type="button" class="primary" id="addBtn"><i data-lucide="plus"></i>Lägg till</button>
      <button type="button" class="secondary" id="backupNowBtn"><i data-lucide="cloud-upload"></i>Backup</button>
    </div>
  </form>

  <div class="table-wrap">
    <table id="rapportTable">
      <thead><tr><th>Datum</th><th>Projekt</th><th>Kategori(er)</th><th>Total tid</th><th>Körtid</th><th>Anteckning</th><th>Åtgärd</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>

  <section id="yearSummary">
    <h2>Årsöversikt</h2>
    <div class="table-wrap">
      <table>
        <thead><tr><th>Månad</th><th>Ordinarie</th><th>Flex</th><th>ÖT&lt;2</th><th>ÖT&gt;2</th><th>Helg</th><th>Semester</th><th>ATF</th><th>VAB</th><th>Sjuk</th><th>Trakt</th><th>Körtid</th></tr></thead>
        <tbody id="yearBody"></tbody>
      </table>
    </div>
  </section>

  <section id="alarms">
    <h2>Larm / obalans denna månad</h2>
    <div class="table-wrap">
      <table>
        <thead><tr><th>Datum</th><th>Tid (h)</th><th>Status</th></tr></thead>
        <tbody id="alarmBody"></tbody>
      </table>
    </div>
  </section>
</main>

<script src="balansregler.js"></script>
<script src="backup.js"></script>
<script src="export.js"></script>
<script src="search.js"></script>
<script src="app.js"></script>
<script>
if(window.lucide){lucide.createIcons();}
const menuBtn=document.getElementById("menuBtn");
const side=document.getElementById("sideMenu");
menuBtn.onclick=()=>side.classList.toggle("open");
</script>
</body>
</html>
